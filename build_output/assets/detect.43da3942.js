import{d as I,a as C,o as N,r as i,b as r,e as B,h as E,f as u,w as a,j as d,a5 as v,t as M,F as w,bZ as R,be as T,_ as S}from"./index.7c9b3f7c.js";import{b as f,c as Z,E as q,a as G}from"./axios.f14805da.js";import{E as H,a as J,c as K}from"./el-input.39841482.js";import{E as L,a as O}from"./el-tag.138bc7a5.js";import"./el-checkbox.a7ce619f.js";const P=R('<div class="container" data-v-7bf22d94><div class="content-title" data-v-7bf22d94>\u9752\u5149\u773C\u75C5\u53D8\u5B9E\u4F8B\u5206\u5272</div><div class="plugins-tips" data-v-7bf22d94><p style="line-height:30px;" data-v-7bf22d94></p><p style="line-height:30px;" data-v-7bf22d94> \u7CFB\u7EDF\u4E3B\u8981\u4F7F\u7528Deeplabv3+\u8FDB\u884C\u773C\u5E95\u56FE\u50CF\u5206\u6790\uFF0C\u5BF9\u773C\u5E95\u56FE\u50CF\u8FDB\u884C\u9884\u5904\u7406\uFF0C\u5305\u62EC\u56FE\u50CF\u53BB\u566A\u3001\u5BF9\u6BD4\u5EA6\u589E\u5F3A\u7B49\u64CD\u4F5C\uFF0C\u4EE5\u63D0\u9AD8\u56FE\u50CF\u8D28\u91CF\uFF0C\u4FBF\u4E8E\u540E\u7EED\u7684\u7279\u5F81\u63D0\u53D6\u548C\u8BC6\u522B\u3002\u5728\u63D0\u53D6\u5230\u7684\u7279\u5F81\u5411\u91CF\u57FA\u7840\u4E0A\uFF0C\u5229\u7528Deeplabv3+\u6A21\u578B\u8FDB\u884C\u89C6\u676F\u89C6\u76D8\u7684\u5206\u5272\u3002\u901A\u8FC7\u8BBE\u5B9A\u9608\u503C\u6216\u91C7\u7528\u5176\u4ED6\u5206\u5272\u7B97\u6CD5\uFF0C\u5C06\u89C6\u676F\u548C\u89C6\u76D8\u4ECE\u773C\u5E95\u56FE\u50CF\u4E2D\u5206\u5272\u51FA\u6765\u3002\u518D\u5BF9\u5206\u5272\u7ED3\u679C\u8FDB\u884C\u540E\u5904\u7406\uFF0C\u5305\u62EC\u53BB\u9664\u5C0F\u533A\u57DF\u3001\u5E73\u6ED1\u8FB9\u7F18\u7B49\u64CD\u4F5C\uFF0C\u4EE5\u5F97\u5230\u66F4\u51C6\u786E\u7684\u89C6\u676F\u89C6\u76D8\u8BC6\u522B\u7ED3\u679C\u3002 </p><p style="line-height:30px;" data-v-7bf22d94></p></div></div>',1),Q={style:{margin:"0 auto",width:"100%"}},W={style:{margin:"0 auto",width:"100%"}},X=I({__name:"detect",setup(Y){const p=C([]),c=C([]),x=()=>{f.get("http://localhost:5000/files").then(o=>{p.splice(0,p.length),p.push(...o.data.results),console.log("\u66F4\u65B0\u6570\u636E")})},D=()=>{f.get("http://localhost:5000/results").then(o=>{c.splice(0,c.length),c.push(...o.data.results),console.log("\u66F4\u65B0\u6570\u636E")})};N(()=>{x(),D()}),i(null),i(""),i(!1),i();const n=C({id:"",name:"",type:"",origin:""});C({id:"",name:"",optic_cup_num:"",optic_disc_num:""});const y=o=>{Z.confirm("\u786E\u8BA4\u5173\u95ED\uFF1F").then(()=>{o()}).catch(()=>{})},V=i(),m=i(!1),k=(o,l)=>{for(let t in l)n[t]=l[t];m.value=!0},g=i(""),A=()=>{fetch(`http://localhost:5000/get_image_save/${n.origin.replace("localhost://","")}`).then(o=>o.blob()).then(o=>{const l=new FormData;l.append("image",o,n.origin.replace("localhost://","")),f.post("http://localhost:5000/upload",l).then(t=>{g.value=t.data.image_path,m.value=!0}).catch(t=>{console.error(t)})}).catch(o=>{console.error(o)})},$=(o,l)=>{f.delete(`http://localhost:5000/results/${l.id}`).then(()=>{D()})};return(o,l)=>{const t=L,F=q,h=T,b=O,_=H,s=J,U=K,j=G;return r(),B("div",null,[P,E("div",Q,[u(b,{data:p,style:{margin:"20px auto"}},{default:a(()=>[u(t,{label:"\u5E8F\u53F7",prop:"id"}),u(t,{label:"\u6587\u4EF6\u540D",prop:"name"}),u(t,{label:"\u7C7B\u578B",prop:"type"}),u(t,{label:"\u6587\u4EF6\u4F4D\u7F6E",prop:"origin"}),u(t,{align:"center",label:"\u56FE\u7247\u9884\u89C8"},{default:a(e=>[u(F,{src:"http://127.0.0.1:5000/get_image_save/"+e.row.name+".jpg",style:{width:"50px",height:"50px"},fit:"cover","z-index":10,"preview-src-list":[e.row.name],"preview-teleported":""},null,8,["src","preview-src-list"])]),_:1}),u(t,{align:"center",label:"\u5904\u7406",width:"200px"},{default:a(e=>[u(h,{size:"small",onClick:z=>k(e.$index,e.row)},{default:a(()=>[d(" \u8BC6\u522B ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),u(j,{title:"\u7F16\u8F91\u56FE\u7247",modelValue:m.value,"onUpdate:modelValue":l[5]||(l[5]=e=>m.value=e),width:"30%","before-close":y},{default:a(()=>[u(U,{ref_key:"editFormRef",ref:V,model:n,"status-icon":"","label-width":"100px",class:"demo-ruleForm"},{default:a(()=>[u(s,{label:"\u5E8F\u53F7",prop:"id"},{default:a(()=>[u(_,{modelValue:n.id,"onUpdate:modelValue":l[0]||(l[0]=e=>n.id=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),u(s,{label:"\u6587\u4EF6\u540D",prop:"name"},{default:a(()=>[u(_,{modelValue:n.name,"onUpdate:modelValue":l[1]||(l[1]=e=>n.name=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),u(s,{label:"\u7C7B\u578B",prop:"type"},{default:a(()=>[u(_,{modelValue:n.type,"onUpdate:modelValue":l[2]||(l[2]=e=>n.type=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),u(s,{label:"\u6587\u4EF6\u4F4D\u7F6E",prop:"origin"},{default:a(()=>[u(_,{modelValue:n.origin,"onUpdate:modelValue":l[3]||(l[3]=e=>n.origin=e),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),u(s,{label:"\u56FE\u7247\u9884\u89C8"},{default:a(()=>[g.value?(r(),v(F,{key:1,src:g.value,style:{"max-width":"50%",height:"auto"},fit:"contain"},null,8,["src"])):(r(),v(F,{key:0,src:"http://127.0.0.1:5000/get_image_save/"+n.name+".jpg",style:{"max-width":"50%",height:"auto"},fit:"contain"},null,8,["src"]))]),_:1}),u(s,null,{default:a(()=>[u(h,{type:"primary",onClick:l[4]||(l[4]=e=>A())},{default:a(()=>[d(" \u8BC6\u522B ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),E("div",null,[E("div",null,[E("div",W,[u(b,{data:c,style:{margin:"20px auto"}},{default:a(()=>[u(t,{label:"\u5E8F\u53F7",prop:"id"}),u(t,{label:"\u6587\u4EF6\u540D",prop:"name"}),u(t,{label:"\u89C6\u676F\u50CF\u7D20\u70B9",prop:"optic_cup_num"}),u(t,{label:"\u89C6\u76D8\u50CF\u7D20\u70B9",prop:"optic_disc_num"}),u(t,{label:"\u89C6\u676F\u6BD4\u4F8B",align:"center"},{default:a(e=>[d(M((e.row.optic_cup_num/(e.row.optic_cup_num+e.row.optic_disc_num)).toFixed(2)),1)]),_:1}),u(t,{label:"\u72B6\u6001",align:"center"},{default:a(e=>[e.row.optic_cup_num/(e.row.optic_cup_num+e.row.optic_disc_num)>=.6?(r(),B(w,{key:0},[d(" \u9752\u5149\u773C ")],64)):(r(),B(w,{key:1},[d(" \u6B63\u5E38 ")],64))]),_:1}),u(t,{align:"center",label:"\u56FE\u7247\u9884\u89C8"},{default:a(e=>[u(F,{src:"http://127.0.0.1:5000/get_img_result/"+e.row.name+".jpg",style:{width:"50px",height:"50px"},fit:"cover","z-index":10,"preview-src-list":[e.row.name],"preview-teleported":""},null,8,["src","preview-src-list"])]),_:1}),u(t,{align:"center",label:"\u64CD\u4F5C",width:"200px"},{default:a(e=>[u(h,{size:"small",type:"danger",onClick:z=>$(e.$index,e.row)},{default:a(()=>[d(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])])])])}}});const ou=S(X,[["__scopeId","data-v-7bf22d94"]]);export{ou as default};
